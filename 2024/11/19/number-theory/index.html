<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>number theory | YXW</title><meta name="author" content="Ludiw Yuan"><meta name="copyright" content="Ludiw Yuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="from top to down RSA process 1234567891011121314151617181920flowchart TD    A(&quot;Start&quot;):::softPink --&gt; B(&quot;Select p and q&quot;):::softYellow    B --&gt; C(&quot;Calculate n &#x3D; p * q&amp;qu">
<meta property="og:type" content="article">
<meta property="og:title" content="number theory">
<meta property="og:url" content="http://example.com/2024/11/19/number-theory/index.html">
<meta property="og:site_name" content="YXW">
<meta property="og:description" content="from top to down RSA process 1234567891011121314151617181920flowchart TD    A(&quot;Start&quot;):::softPink --&gt; B(&quot;Select p and q&quot;):::softYellow    B --&gt; C(&quot;Calculate n &#x3D; p * q&amp;qu">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/spinningTennis.jpg">
<meta property="article:published_time" content="2024-11-19T03:28:29.000Z">
<meta property="article:modified_time" content="2024-12-10T13:28:59.810Z">
<meta property="article:author" content="Ludiw Yuan">
<meta property="article:tag" content="algebra">
<meta property="article:tag" content="group">
<meta property="article:tag" content="theory">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/spinningTennis.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/11/19/number-theory/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'number theory',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">YXW</span></a><a class="nav-page-title" href="/"><span class="site-name">number theory</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">number theory</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-11-19T03:28:29.000Z" title="Created 2024-11-19 11:28:29">2024-11-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-12-10T13:28:59.810Z" title="Updated 2024-12-10 21:28:59">2024-12-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="from-top-to-down"><a href="#from-top-to-down" class="headerlink" title="from top to down"></a>from top to down</h1><ol>
<li><p>RSA process</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A(&quot;Start&quot;):::softPink --&gt; B(&quot;Select p and q&quot;):::softYellow</span><br><span class="line">    B --&gt; C(&quot;Calculate n = p * q&quot;):::softYellow</span><br><span class="line">    C --&gt; D(&quot;Calculate φ(n) = (p-1) * (q-1)&quot;):::softYellow</span><br><span class="line">    D --&gt; E[&quot;Choose public key e:</span><br><span class="line">    1. 1 &lt; e &lt; φ(n)</span><br><span class="line">    2. gcd(e,φ(n)) = 1</span><br><span class="line">    3. Typically use 65537&quot;]:::softYellow</span><br><span class="line">    E --&gt; F[&quot;Calculate private key d:</span><br><span class="line">    1. d * e ≡ 1 mod φ(n)</span><br><span class="line">    2. Extended Euclidean Algorithm</span><br><span class="line">    3. d is the multiplicative inverse of e&quot;]:::softYellow</span><br><span class="line">    F --&gt; G(&quot;Keys Generated&quot;):::softBlue</span><br><span class="line">    G --&gt; H(&quot;Encryption: C ≡ M^e mod n&quot;):::softPink</span><br><span class="line">    G --&gt; I(&quot;Decryption: M ≡ C^d mod n&quot;):::softBlue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    classDef softPink fill:#FFE6E6,stroke:#666,stroke-width:1px</span><br><span class="line">    classDef softBlue fill:#E6E6FF,stroke:#666,stroke-width:1px</span><br><span class="line">    classDef softYellow fill:#FFFFF0,stroke:#666,stroke-width:1px</span><br></pre></td></tr></table></figure>

<ol>
<li><p>basic princle for this algorithm</p>
<ul>
<li><p>decryptable</p>
<blockquote>
<p>as above</p>
<p>we have plaintext M, keys (d,e,n) </p>
<p>sending $ m^e\mod n $</p>
<p>recieve C, and decoding $C^d\mod n$</p>
<p>that is proof: $M \equiv  c^d \mod n$</p>
<p><img src="https://i.imgur.com/cVL9eKb.png" alt="proof"></p>
<p><img src="https://i.imgur.com/1SlZ8Yc.png" alt="proof_2"></p>
</blockquote>
</li>
<li><p>modular</p>
<p>a mod b:&#x3D; r &#x3D;&gt; a &#x3D; qb+r $a,b \in Z,b&gt;0$</p>
<p>not that a &lt;0 could have similar way to find it</p>
<blockquote>
<p>-40 mod 11&#x3D; ?</p>
<p>q*11 +40 &#x3D; r </p>
</blockquote>
<p>basic properties<br>$$<br>\begin{align*}<br>&amp;(1) \quad a + b \mod n &#x3D; (a \mod n + b \mod n) \mod n \<br>&amp;(2) \quad a - b \mod n &#x3D; (a \mod n - b \mod n) \mod n \<br>&amp;(3) \quad a \times b \mod n &#x3D; ((a \mod n) \times (b \mod n)) \mod n<br>\end{align*}<br>$$<br>this improvement is quick simple, I’d like to using visualization as below.</p>
<p><img src="https://i.imgur.com/TATSwbH.png" alt="list"></p>
<p>Also, if you like a formal proof</p>
<blockquote>
<p>$$<br>\text{To prove:} \quad a + b \mod n &#x3D; (a \mod n) + (b \mod n) \mod n<br>\<br>\text{Assume:} \quad r &#x3D; a + b \mod n, \quad r_1 &#x3D; a - k_1 n, \quad r_2 &#x3D; b - k_2 n<br>\<br>\text{Substitute:} \quad r &#x3D; a + b \implies r &#x3D; r_1 + k_1 n + r_2 + k_2 n &#x3D; (k_1 + k_2)n + r_1 + r_2<br>\<br>\text{Thus, we have:} \quad r \equiv r_1 + r_2 \ (\text{mod} \ n)<br>\<br>\text{Conclusion:} \quad \text{Clearly,} \ r \equiv r_1 + r_2 \ (\text{mod} \ n), \quad \text{Quod Erat Demonstrandum}<br>$$</p>
</blockquote>
<p>Note that, Do not using divided into this function, a straight-forward way:</p>
<blockquote>
<p>$$<br>\begin{align*}<br>&amp;(1) \quad 9 \equiv 3 \pmod{6} \<br>&amp;(2) \quad 9 \div 3 \equiv 3 \div 3 \pmod{6} \<br>&amp;(3) \quad \textit{obviously it does not satisfy} \<br>&amp;(4) \quad 3 \not\equiv 1 \pmod{6}<br>\end{align*}<br>$$</p>
<p>Because 3 and 6 are not coprime (互质), division does not hold in modular arithmetic. This is one of the most critical points to note when working with congruences（同余）</p>
</blockquote>
</li>
<li><p>modular inverse(模逆元)</p>
<p>This concecption is too signicant to expression my second language. I have to finish it with my bilingual.</p>
<p>这个概念特别重要，我需要使用双语来完成相关的描述。</p>
<p>For a normal inverse like matrx inverse and The notation $$a^{-1}$$ should not be confused with the reciprocal in regular arithmetic.When we write $$a^{-1}$$, we mean the number that when multiplied by $$a$$ gives 1 in modular arithmetic</p>
<p>我们通常将 $e^{-1} \mod m$ 等价于$(m+1)\div x &#x3D;d,d\in(0,m,R)$ 这种情况下，我们说d是e的<strong>乘法逆元</strong> </p>
<p>值得一提，我们通常直接会将这个负一次幂保留，而去理解成他的逆元（或者是他的等价式子）千万不要当到倒数去理解（这是在不用模下面的倒数）</p>
<ul>
<li><p>Application(应用)：<br>The main application is to enable division in modular arithmetic by converting division into multiplication:</p>
<p>上节我们知道，模运算不支持除法等价性，这时候我们能够将其同时呈上对应的乘法逆元，就能拿使用对应的性质</p>
<p>$ \quad a \times b^{-1}  \mod n &#x3D; ((a \mod n) \times (b^{-1} \mod n)) \mod n<br>$</p>
<p>$\quad ab^-1\equiv cb^{-1}\rightarrow a\equiv c$</p>
</li>
<li><p>Existence Property(存在性)： </p>
<p>A modular multiplicative inverse of $$a$$ modulo $$m$$ exists if and only if $$a$$ and $$m$$ are coprime.That is, if $$\gcd(a,m) &#x3D; 1$$, then there exists a unique $$b$$ in $$[0,m-1]$$ such that:</p>
<p>$如果a与c互素，那么其一定存在乘法逆元b^-1$</p>
<p>换句话说，互质的两个数具有除法消去性</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Euler’s Theorem and proof</p>
<ol>
<li><p>Euler’s totient funtcion</p>
<p>$\phi_{(n)}$ conclude  all the numbers which are prime to n in range(0,n).</p>
<p>Specially, If n is a prime number, $\phi_{(n)}&#x3D;n-1$</p>
</li>
<li><p>Euler’s Theorem<br>$$<br>\begin{align*}<br>&amp;\text{If } a, n \text{ are prime numbers,As} \gcd(a,n) &#x3D; 1 \<br>&amp;\text{Then: } a^{\phi(n)} \equiv 1 \pmod{n}<br>\end{align*}<br>$$<br>Proof:</p>
<p><em>since this proof represent a constructing way, I’d like to demo it a little</em><br>$$<br>\begin{align*}<br>&amp;\text{Assume } R &#x3D; {r_1, r_2, …, r_{\phi(n)}} \text{ is a simple coprime set of } n \<br>&amp;\text{Since } a \text{ is prime to } n, \text{ we can conclude } a \cdot R \text{ is also in a set } \text{ which is} \<br>&amp;\text{another coprime set,written as R2. (demo below)} \[1em]<br>&amp;\text{Therefore:} \<br>&amp;R \equiv R_2 \pmod{n} \<br>&amp;\rightarrow r_1r_2…r_{\phi(n)} \equiv a_1a_2…a_{\phi(n)} \pmod{n} \[1em]<br>&amp;\text{Remove } r_1, r_2, r_3, …, r_{\phi(n)} \text{ from both sides:} \<br>&amp;\rightarrow 1 \equiv a^{\phi(n)} \pmod{n}<br>\end{align*}<br>$$</p>
<blockquote>
<p>e.g </p>
<p>congruence set{1,3,5,7} for 8 ,$\phi_{(8)}&#x3D;4$</p>
<p>meanwhile a in {1,3,5,7}</p>
<p>try a &#x3D;3 </p>
<p>you can get {3,9,15,21} while the rest set is {3,1,7,5}</p>
</blockquote>
</li>
</ol>
<p>so far, you have to remeber</p>
<ol>
<li>RSA algorithm in math is actually a mod inverse computing anti decryption</li>
<li>set, group, class begin</li>
</ol>
</li>
</ol>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Ludiw Yuan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/11/19/number-theory/">http://example.com/2024/11/19/number-theory/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/algebra/">algebra</a><a class="post-meta__tags" href="/tags/group/">group</a><a class="post-meta__tags" href="/tags/theory/">theory</a></div><div class="post-share"><div class="social-share" data-image="/img/spinningTennis.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/11/25/windows-powershell/" title="windows powershell"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">windows powershell</div></div><div class="info-2"><div class="info-item-1"> Alias set alias format： Set-Alias -Name youwant -Value original command check alias  Get-alias name using powershell ise to profile it, see the cd link below  cd cd path  is a most common way to change dir, if you go this command like cd xxxx in a bash script to short the long path name mapping, you will suprisely find it seems to change nothing. Cause, the script is anther process, and it does cd in that process while in you cunrrent terminal process, you see it keep itself.  to do this,...</div></div></div></a><a class="pagination-related" href="/2024/11/19/ssh/" title="ssh"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">ssh</div></div><div class="info-2"><div class="info-item-1"> ssh worksflow I classify the ssh for these three parts: code from ssh -vvv   tcp  connection establisment 12debug1: Connecting to ec2-3-91-205-43.compute-1.amazonaws.com [3.91.205.43] port 22.debug1: Connection established.    verision negotiation 12debug1: Local version string SSH-2.0-OpenSSH_for_Windows_9.5debug1: Remote protocol version 2.0, remote software version OpenSSH_9.6p1 Ubuntu-3ubuntu13.5  algorithm negotiation 1234debug1: kex: algorithm: curve25519-sha256debug1: kex: host key...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/spinningTennis.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Ludiw Yuan</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://www.zhihu.com/people/schnappi-li"><i class="fab fa-zhihu"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#from-top-to-down"><span class="toc-number">1.</span> <span class="toc-text">from top to down</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/10/Web%20Intro/" title="Web Intro">Web Intro</a><time datetime="2024-12-10T13:28:59.928Z" title="Created 2024-12-10 21:28:59">2024-12-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/10/hello-world/" title="Hello World">Hello World</a><time datetime="2024-12-10T11:15:16.118Z" title="Created 2024-12-10 19:15:16">2024-12-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/25/windows-powershell/" title="windows powershell">windows powershell</a><time datetime="2024-11-25T08:55:26.000Z" title="Created 2024-11-25 16:55:26">2024-11-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/19/number-theory/" title="number theory">number theory</a><time datetime="2024-11-19T03:28:29.000Z" title="Created 2024-11-19 11:28:29">2024-11-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/19/ssh/" title="ssh">ssh</a><time datetime="2024-11-19T02:21:50.000Z" title="Created 2024-11-19 10:21:50">2024-11-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Ludiw Yuan</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? '' : ''

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>